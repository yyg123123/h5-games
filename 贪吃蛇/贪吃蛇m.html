<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            list-style: none;
        }

        ul {
            height: 620px;
            width: 620px;
            position: absolute;
            top: -62px;
        }

        li {
            height: 60px;
            width: 60px;
            border: 1px solid red;
            float: left;
        }

        .show {
            height: 620px;
            width: 620px;
            margin: 100px auto;
            position: relative;
            overflow: hidden;
        }

    </style>
</head>

<body>
    <div class="show">
        <ul>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>

    <script>
        var ul = document.getElementsByTagName("ul")[0],
            li = ul.getElementsByTagName("li"),
            arr = [44, 45, 46],
            go_x = false,
            go_y = true,
            go_ = false,
            eat = 73,
            unshift_ = true;

        function init() {
            for (i = 0; i < li.length; i++) {
                li[i].style.background = "#fff";
            }
            li[eat].style.background = "green";
            for (var i = 0; i < arr.length; i++) {
                li[arr[i]].style.background = "red";
            }
            go_ = true;
        }
        init();

        function go(index) {
            timer = setInterval(function() {
                
                move(index);
            }, 300);
        }
        go(-1);
        document.onkeydown = function(e) {
            var event = e || window.event;
            if (go_) {
                switch (event.keyCode) {
                    case 38:
                        if (go_y) {
                            clearInterval(timer)
                            go(-10);
                        }
                        go_x = true;
                        go_y = false;
                        break;
                    case 37:
                        if (go_x) {
                            clearInterval(timer)
                            go(-1);
                        }
                        go_x = false;
                        go_y = true;
                        break;
                    case 40:
                        if (go_y) {
                            clearInterval(timer)
                            go(10);
                        }
                        go_x = true;
                        go_y = false;
                        break;
                    case 39:
                        if (go_x) {
                            clearInterval(timer)
                            go(1);
                        }
                        go_x = false;
                        go_y = true;
                        break;
                }
            }
        }

        function move(index) {

                if (unshift_) {
                    var temp = arr[0] + index;
                    arr.unshift(temp);
                }
                for (var k = 2; k < arr.length; k++) {
                    if (arr[0] == arr[k]) {
                        clearInterval(timer);
                        alert("你输了");
                        return false;
                    }
                }
                if (arr[0] % 10 == 0 && arr[1] % 10 == 9 ||
                    arr[0] % 10 == 9 && arr[1] % 10 == 0 ||
                    arr[0] < 10 || arr[0] > 109) {
                    clearInterval(timer);
                    alert("你输了");
                } else if (temp == eat) {
                    eatFood();
                } else {
                    if (unshift_) {
                        arr.pop();
                    }
                    for (i = 0; i < li.length; i++) {
                        li[i].style.background = "#fff";
                    }
                    li[eat].style.background = "green";
                    for (var i = 0; i < arr.length; i++) {
                        li[arr[i]].style.background = "red";
                    }
                    console.log(arr);
                    unshift_ = true;
                }

        }

        function eatFood() {
            li[eat].style.background = "red";
            for (var i = 0; i < 1; i++) {
                eat = Math.floor(Math.random() * 99 + 10);
                for (var j = 0; j < arr.length; j++) {
                    if (eat == arr[j]) {
                        i--;
                    }
                }
            }

            unshift_ = false;
        }

    </script>
</body>

</html>
